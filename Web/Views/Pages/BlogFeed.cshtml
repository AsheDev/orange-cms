@{
    ViewBag.Title = "Blog Feed";
    Layout = "~/Views/Shared/_Master.cshtml";
}
@using Orange.Core.Utility
@using Orange.Core.Entities
@model Web.Models.BlogFeed


<div class="small-16 columns" style="background-color: #FFFFFF;">
    <br /><br /><br />
    <h2 class="text-center">Sample Blog</h2>


    @{
        if(Convert.ToBoolean(Session["Authenticated"]))
        {
            <div class="row">
                <div class="small-16 columns text-center">
                    <br />
                    <a class="button small-10">Add New Blog Entry</a>
                    <hr />
                </div>
            </div>
        }        
    }    

    @{bool additionalPosts = (Model.Posts.Count > 3);}
    @for (int p = 0; p < 3; ++p)
    {
        <div class="row">
            <div class="small-16 columns">
                <br />
                <h2 class="text-left">@Model.Posts[p].Subject</h2>
                <h5 class="text-left">@Model.Posts[p].EffectiveDate</h5>
                <p class="text-left">@Model.Posts[p].Body.TrimToEllipsis(256)</p>
                <p></p>
            </div>
            <div class="small-4 columns">
                <label class="standard-cursor">Comments (@Model.Posts[p].CommentCount)</label>
            </div>
            <div class="small-16 columns">
                <br />
                @Html.ActionLink("Read Post", "BlogPost", "Posts", new { locatorId = @Model.Posts[p].Id }, new { @id = "btnBlogPost", @class="button small-6" })
            </div>
            <hr />
        </div>        
    }

    @if (Model.Posts.Count > 3)
    {
        if (Model.Posts.Count > 8)
        {
            <div class="row">
                <div class="small-16 columns">
                    <br />
                    <a class="button small-16">Load next five posts</a>
                </div>
            </div>  
        }
        else
        {
            <div class="row">
                <div class="small-16 columns">
                    <br />
                    <a class="button small-16">Load next (@Model.Posts.Count - 3) posts</a>
                </div>
            </div>
        }
    }
    
    <br />
    <br />   

</div>

